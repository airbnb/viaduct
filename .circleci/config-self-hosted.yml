version: 2.1

workflows:
  build-workflow:
    jobs:
      - runner
jobs:
  runner:
    machine: true
    resource_class: gperalta-primehire/gperalta-self-hosted
    steps:
      - run: echo "Hi I'm on Runners!"
      - run:
          name: Checking conection to Github Cloud 
          command: |
            curl -f \
              -H "Authorization: token ${GH_PAT}" \
              -H "Accept: application/vnd.github.v3+json" \
              https://api.github.com/repos/airbnb/viaduct
            echo "✅ Access to private repository"

      - run:
          name: Checking conection to Github On-Premise
          command: |
            curl -f \
              -H "Authorization: token ${GH_PAT_TREEHOUSE}" \
              -H "Accept: application/vnd.github.v3+json" \
              https://git.musta.ch/api/v1/airbnb/treehouse/
            echo "✅ Access to private repository"

